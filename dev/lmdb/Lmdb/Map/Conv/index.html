<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"><head><title>Conv (lmdb.Lmdb.Map.Conv)</title><link rel="stylesheet" href="../../../../odoc.css"/><meta charset="utf-8"/><meta name="viewport" content="width=device-width,initial-scale=1.0"/><script src="../../../../highlight.pack.js"></script><script>hljs.initHighlightingOnLoad();</script></head><body><div class="content"><header><nav><a href="../index.html">Up</a> – <a href="../../../index.html">lmdb</a> &#x00BB; <a href="../../index.html">Lmdb</a> &#x00BB; <a href="../index.html">Map</a> &#x00BB; Conv</nav><h1>Module <code>Map.Conv</code></h1><p>Converters to and from the internal representation of keys and values.</p><p>A converter is a module with Signature <a href="module-type-S/index.html"><code>S</code></a> containing the serialising <a href="module-type-S/index.html#val-write"><code>Conv.S.write</code></a> and deserialising <a href="module-type-S/index.html#val-read"><code>Conv.S.read</code></a> functions as well as the <a href="module-type-S/index.html#val-flags"><code>Conv.S.flags</code></a> applied when the converter is used in a map.</p><p>For convenience every converter is is also exported as first-class value so it can be easily passed to <a href="../index.html#val-create"><code>Map.create</code></a> and <a href="../index.html#val-open_existing"><code>Map.open_existing</code></a>.</p><nav class="toc"><ul><li><a href="#types">Types</a></li><li><a href="#predefined-converters">Predefined converters</a><ul><li><a href="#strings">Strings</a></li><li><a href="#integers">Integers</a></li></ul></li><li><a href="#underlying-modules">Underlying modules</a></li></ul></nav></header><section><header><h3 id="types"><a href="#types" class="anchor"></a>Types</h3></header><dl><dt class="spec type" id="type-bigstring"><a href="#type-bigstring" class="anchor"></a><code><span class="keyword">type</span> bigstring</code><code> = (char, Bigarray.int8_unsigned_elt, Bigarray.c_layout) Bigarray.Array1.t</code></dt><dd><p>Bigstrings are used to transfer the raw serialised data into and out of the database. They may point directly to a memory-mapped region of the database file.</p></dd></dl><dl><dt class="spec module" id="module-Flags"><a href="#module-Flags" class="anchor"></a><code><span class="keyword">module</span> <a href="Flags/index.html">Flags</a> : <span class="keyword">module</span> <span class="keyword">type</span> <span class="keyword">of</span> <a href="../../../Lmdb__/Lmdb_bindings/index.html#module-DbiFlags">Lmdb__.Lmdb_bindings.DbiFlags</a></code></dt><dd><p>Flags describing the (sorting) properties of keys and values of a map.</p></dd></dl><dl><dt class="spec module-type" id="module-type-S"><a href="#module-type-S" class="anchor"></a><code><span class="keyword">module</span> <span class="keyword">type</span> <a href="module-type-S/index.html">S</a> = <span class="keyword">sig</span> ... <span class="keyword">end</span></code></dt><dd><p>Signature of a converter module</p></dd></dl><dl><dt class="spec type" id="type-t"><a href="#type-t" class="anchor"></a><code><span class="keyword">type</span> 'a t</code><code> = (<span class="keyword">module</span> <a href="module-type-S/index.html">S</a> <span class="keyword">with</span> <span class="keyword">type</span> <a href="module-type-S/index.html#type-t">t</a> = <span class="type-var">'a</span>)</code></dt><dd><p><code>'a t</code> is a first-class converter module.</p></dd></dl></section><section><header><h3 id="predefined-converters"><a href="#predefined-converters" class="anchor"></a>Predefined converters</h3></header><section><header><h4 id="strings"><a href="#strings" class="anchor"></a>Strings</h4></header><dl><dt class="spec value" id="val-bigstring"><a href="#val-bigstring" class="anchor"></a><code><span class="keyword">val</span> bigstring : <a href="index.html#type-bigstring">bigstring</a> <a href="index.html#type-t">t</a></code></dt><dd><p>The <code>bigstring</code> converter returns bigstrings as returned by the lmdb backend. These bigstrings point into the environment memory-map and are therefore only guaranteed to be valid until the transaction ends. If you need longer-lived values use the <code>string</code> converter, make a copy or write a custom converter.</p></dd></dl><dl><dt class="spec value" id="val-string"><a href="#val-string" class="anchor"></a><code><span class="keyword">val</span> string : string <a href="index.html#type-t">t</a></code></dt></dl></section><section><header><h4 id="integers"><a href="#integers" class="anchor"></a>Integers</h4></header><aside><p>The integer converters will make use of <a href="../../../Lmdb__Lmdb_bindings/DbiFlags/index.html#type-t"><code>Flags.t</code></a> as appropriate so that integers are sorted in ascending order irrespective of machine endianness.</p></aside><dl><dt class="spec value" id="val-int32_be"><a href="#val-int32_be" class="anchor"></a><code><span class="keyword">val</span> int32_be : Stdlib.Int32.t <a href="index.html#type-t">t</a></code></dt><dt class="spec value" id="val-int64_be"><a href="#val-int64_be" class="anchor"></a><code><span class="keyword">val</span> int64_be : Stdlib.Int64.t <a href="index.html#type-t">t</a></code></dt><dt class="spec value" id="val-int32_le"><a href="#val-int32_le" class="anchor"></a><code><span class="keyword">val</span> int32_le : Stdlib.Int32.t <a href="index.html#type-t">t</a></code></dt><dt class="spec value" id="val-int64_le"><a href="#val-int64_le" class="anchor"></a><code><span class="keyword">val</span> int64_le : Stdlib.Int64.t <a href="index.html#type-t">t</a></code></dt></dl><aside><p>For convenience the <code>_as_int</code> converters convert the internal integer representation to and from <code>int</code>.</p><dl><dt>raises Invalid_argument</dt><dd><p>&quot;Lmdb: Integer truncated&quot;</p></dd></dl></aside><dl><dt class="spec value" id="val-int32_be_as_int"><a href="#val-int32_be_as_int" class="anchor"></a><code><span class="keyword">val</span> int32_be_as_int : int <a href="index.html#type-t">t</a></code></dt><dt class="spec value" id="val-int64_be_as_int"><a href="#val-int64_be_as_int" class="anchor"></a><code><span class="keyword">val</span> int64_be_as_int : int <a href="index.html#type-t">t</a></code></dt><dt class="spec value" id="val-int32_le_as_int"><a href="#val-int32_le_as_int" class="anchor"></a><code><span class="keyword">val</span> int32_le_as_int : int <a href="index.html#type-t">t</a></code></dt><dt class="spec value" id="val-int64_le_as_int"><a href="#val-int64_le_as_int" class="anchor"></a><code><span class="keyword">val</span> int64_le_as_int : int <a href="index.html#type-t">t</a></code></dt></dl></section></section><section><header><h3 id="underlying-modules"><a href="#underlying-modules" class="anchor"></a>Underlying modules</h3></header><aside><p>These underlying modules may be useful when writing custom converters</p></aside><div class="spec module" id="module-Bigstring"><a href="#module-Bigstring" class="anchor"></a><code><span class="keyword">module</span> <a href="Bigstring/index.html">Bigstring</a> : <a href="index.html#module-type-S">S</a> <span class="keyword">with</span> <span class="keyword">type</span> <a href="module-type-S/index.html#type-t">t</a> = <a href="index.html#type-bigstring">bigstring</a></code></div><div class="spec module" id="module-String"><a href="#module-String" class="anchor"></a><code><span class="keyword">module</span> <a href="String/index.html">String</a> : <a href="index.html#module-type-S">S</a> <span class="keyword">with</span> <span class="keyword">type</span> <a href="module-type-S/index.html#type-t">t</a> = string</code></div><div class="spec module" id="module-Int32_be"><a href="#module-Int32_be" class="anchor"></a><code><span class="keyword">module</span> <a href="Int32_be/index.html">Int32_be</a> : <a href="index.html#module-type-S">S</a> <span class="keyword">with</span> <span class="keyword">type</span> <a href="module-type-S/index.html#type-t">t</a> = Stdlib.Int32.t</code></div><div class="spec module" id="module-Int64_be"><a href="#module-Int64_be" class="anchor"></a><code><span class="keyword">module</span> <a href="Int64_be/index.html">Int64_be</a> : <a href="index.html#module-type-S">S</a> <span class="keyword">with</span> <span class="keyword">type</span> <a href="module-type-S/index.html#type-t">t</a> = Stdlib.Int64.t</code></div><div class="spec module" id="module-Int32_le"><a href="#module-Int32_le" class="anchor"></a><code><span class="keyword">module</span> <a href="Int32_le/index.html">Int32_le</a> : <a href="index.html#module-type-S">S</a> <span class="keyword">with</span> <span class="keyword">type</span> <a href="module-type-S/index.html#type-t">t</a> = Stdlib.Int32.t</code></div><div class="spec module" id="module-Int64_le"><a href="#module-Int64_le" class="anchor"></a><code><span class="keyword">module</span> <a href="Int64_le/index.html">Int64_le</a> : <a href="index.html#module-type-S">S</a> <span class="keyword">with</span> <span class="keyword">type</span> <a href="module-type-S/index.html#type-t">t</a> = Stdlib.Int64.t</code></div><div class="spec module" id="module-Int32_be_as_int"><a href="#module-Int32_be_as_int" class="anchor"></a><code><span class="keyword">module</span> <a href="Int32_be_as_int/index.html">Int32_be_as_int</a> : <a href="index.html#module-type-S">S</a> <span class="keyword">with</span> <span class="keyword">type</span> <a href="module-type-S/index.html#type-t">t</a> = int</code></div><div class="spec module" id="module-Int64_be_as_int"><a href="#module-Int64_be_as_int" class="anchor"></a><code><span class="keyword">module</span> <a href="Int64_be_as_int/index.html">Int64_be_as_int</a> : <a href="index.html#module-type-S">S</a> <span class="keyword">with</span> <span class="keyword">type</span> <a href="module-type-S/index.html#type-t">t</a> = int</code></div><div class="spec module" id="module-Int32_le_as_int"><a href="#module-Int32_le_as_int" class="anchor"></a><code><span class="keyword">module</span> <a href="Int32_le_as_int/index.html">Int32_le_as_int</a> : <a href="index.html#module-type-S">S</a> <span class="keyword">with</span> <span class="keyword">type</span> <a href="module-type-S/index.html#type-t">t</a> = int</code></div><div class="spec module" id="module-Int64_le_as_int"><a href="#module-Int64_le_as_int" class="anchor"></a><code><span class="keyword">module</span> <a href="Int64_le_as_int/index.html">Int64_le_as_int</a> : <a href="index.html#module-type-S">S</a> <span class="keyword">with</span> <span class="keyword">type</span> <a href="module-type-S/index.html#type-t">t</a> = int</code></div></section></div></body></html>