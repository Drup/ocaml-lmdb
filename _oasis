Name: ocaml-lmdb
Version: 0.1
Synopsis: OCaml binding for lmdb.
Authors: Gabriel Radanne <drupyog@zoho.com>
License: MIT
Description: OCaml bindings for lmdb (http://symas.com/mdb/#overview)

OASISFormat: 0.4
BuildTools: ocamlbuild
Plugins: META (0.4), DevFiles (0.4)

Library lmdb
  Path: src
  Modules: Lmdb_bindings, Lmdb
  BuildDepends: bigstringaf
  CCLib: -llmdb
  CSources: lmdb_stubs.c


Executable "version"
  Path: tests
  MainIs: version.ml
  Build$: flag(tests)
  CompiledObject: best
  Install: false
  BuildDepends: lmdb

Test "version"
  Run$: flag(tests)
  TestTools: version
  Command: $version
  WorkingDirectory: _build


Executable "simple_db"
  Path: tests
  MainIs: simple_db.ml
  Build$: flag(tests)
  CompiledObject: best
  Install: false
  BuildDepends: lmdb


Executable "test"
  Path: tests
  MainIs: test.ml
  Build$: flag(tests)
  CompiledObject: best
  Install: false
  BuildDepends: lmdb, alcotest, benchmark

Test "test"
  Run$: flag(tests)
  TestTools: test
  Command: env MALLOC_CHECK_=3 MALLOC_PERTURB_=195 $test -q
  WorkingDirectory: _build


Executable "bench"
  Path: tests
  MainIs: bench.ml
  Build$: flag(tests)
  CompiledObject: best
  Install: false
  BuildDepends: lmdb, benchmark


AlphaFeatures: ocamlbuild_more_args
Document api
  Install: false
  Type: ocamlbuild (0.3)
  BuildTools: ocamldoc

  Title: API reference for OCaml-lmdb
  XOCamlbuildPath: .
  XOCamlbuildExtraArgs:
    "-docflags '-colorize-code -short-functors -charset utf-8'"
  XOCamlbuildLibraries: lmdb
